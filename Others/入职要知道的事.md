行政流程和 OA


入职相关：入职通知邮件
请假（病假、事假、年假）：OA
出差（车票、住宿）：OA
报销（餐饮、活动经费）：OA
补充医疗保险：HR
申请购买软件：OA
办公用品：行政



前端产品项目


webconsole
website
websupervisor
boss
express
IOS / Android / 小程序
appcenter
openpitrix
kubesphere
ifcloud
object storage
anybox
object storage portal / neonsan portal / nas portal
qs portal
qui



前端职责


定义、设计、开发青云产品的可视化交付形态
Platform: Web / Mobile
User Experience: Product Design / Interaction Design / Vision Design / Client-Side Developing
No language limit. No ability limit.
Be a feature/product owner



前端技能


协议类


网络7层/5层协议
HTTP
HTTPS
Websocket



runtime 类


浏览器
JS Engine
Render Engine
Node/Deno
WebAssembly
Nginx/Apache



语言类


Javascript - ES3/5/6/8
ECMAScript 未来标准
CSS 2/3
CSS 未来标准
LESS/SASS/SCSS/Stylus/PostCSS
CSS in JS
HTML 4/5
HTML 未来标准
NodeJS
Python



框架类


React
Backbone
Django
Express/Koa



工具链


Gulp
npm/yarn
webpack/rollup
babel
eslint
cypress



性能类


Chrome 调试工具
React 调优工具
Node 调优
Apache / Nginx 调优



安全类


DDoS/CC
SQL
XSS
CSRF
WAF



QA 类


Code Review 模式、工具
前端 Unit Test
前端 Integration Test
E2E Test



CI/CD


Git hooks
Jenkins
Docker 部署
LB/AutoScaling 线上部署



问题处理


各语言问题收集方法
sentry
ELK



运营类


WordPress
H5 工具
用户行为跟踪方式
日志收集工具



开发测试、预上线、线上环境

Iaas 相关项目


开发测试环境：testing (SDN 2.0) staging (region, SDN 1.0) // 需要连接 office VPN
预上线环境：pek2
线上环境：pek3


// webservice environment
192.168.14.5 webservice.staging
192.168.5.3 webservice.testing
106.38.249.227 webservice.zw

// testing hosts
192.168.5.3 console.alphacloud.com supervisor.alphacloud.com appcenter.alphacloud.com
192.168.5.4 cb1test.alphacloud.com
192.168.5.3 cb0test.alphacloud.com

// staging hosts
192.168.7.5 www.staging.com console.staging.com supervisor.staging.com
192.168.7.5 docs.staging.com appcenter.staging.com

// zw hosts
106.38.249.227 console.betacloud.com supervisor.betacloud.com appcenter.betacloud.com
139.198.1.252 api.qingcache.com console.qingcache.com

// pek2 hosts
119.254.110.3 pek2console.qingcloud.com pek2.qingcloud.com pek2appcenter.qingcloud.com

// supervisor pek2 环境
http://10.16.40.210:8883/

// supervisor 线上环境
http://172.16.10.108:8883/

//zw 测试环境
220.181.27.100 console.qingyun.com docs.qingyun.com

//testing firstbox
172.31.20.50
我们的环境，与前端相关的通常有几种角色：


proxy，这是 dev/op 登录的跳板机，用于访问其他角色节点。
vg, 这是提供了外部访问 ip 的节点，通常用作 nginx 接入机，有的环境也复用做跳板机。
webservice节点，通常有2个，部署 web 和 http api 相关的服务，例如 website/webconsole 等前端项目，以及 api_server, ws 等后端项目。


访问方式：


想访问某个环境前，让已经有权限的同事，把自己的 public key 加到对应 proxy 节点的 authorized_keys 列表中，即可通过 ssh 登录。
ssh root@proxy 到具体的 proxy 节点
ssh webservice0; ssh webservice1 到 webservice0/1 节点。


VPN 的 remote ip 配置：

office: remote 139.198.255.2 1194   // 连 testing/staging/zw 等环境使用
qingcloud: remote 117.121.26.103    // 连 supervisor 线上环境使用
pek2: remote 119.254.110.3 1194     // 连 supervisor 的 pek2 预上线环境使用
boss: remote 121.201.63.169 1194    // 连 boss 线上环境使用
开发环境搭建指南：


docker version
本地版本暂无



设计、开发流程、MR 和 code review、上线

关于设计：


设计师是 design 专家，前端 dev 可以不是专家，但需要有审美，能分清好坏，不能容忍明显差的交互和外观。
交互方面，设计师和前端都有话语权，都需要想清楚怎样的交互好，要从用户的角度去想功能，不要做实验室产品，不能想当然。（如果交互方面意见相左，沟通没有达成一致，以设计师为准，按专业分工。）
任何好的设计，都不是一蹴而就的，有迭代有进步甚至有反复。但每一次的改进，一定是有理由的。


关于开发：


一般 iaas 相关项目后端配置的环境都是 testing 环境，相关的配置文件涉及到 api_server 的部分，可以参看 testing 环境的配置。
其他项目如 cmp, qingstor 等有自己的 testing 环境，可以用类似的方法去配置。
api 相关接口，不一定都在线上有文档，内部文档也更新的不及时，通常用 cli 来看。cli 查看方法是登录 testing 的 webservice 节点，/pitrix/cli 目录执行相关 api 对应命令。
开发之前要自己想清楚整个流程，做具体功能的人要有自己的想法，如果哪个环节不熟悉，可以问人。不要害怕接触系统层面、后端层面的新概念，这些都会丰富自己的知识体系。
开发时要熟练掌握 git 常用的命令，要充分测试。测试通常使用普通权限账号、子账号都进行测试。


关于代码：

前端的代码规范是：代码规范

关于 MR 和 code review：


开发过程中的 commit 尽量 rebase，使得每次 commit 是一个相对完整的内容，不要太凌乱。
MR 提交前一定要经过 eslint 验证 coding style 和基本 syntax error 等。
相关 MR owner 需要主动找人做 code review，可以是有经验的同事，也可以是新同事。MR 必须经过 code review 才能 merge。
code review 包括了 coding style, syntax error, logic error, refactor point 等等，但最好 coding style 能够在 eslint 阶段解决。


关于上线：

通常大版本（跟后端配合的版本）在周六更新 pek2 预发布环境，周日或周一晚上上线，相关 change owner 要 stand by 验证功能。
小版本通常是 bugfix 或小的 feature/upgrade，可以随时发布，一般是晚上。

大版本上线的流程是：


后端改动经过 code review 合入 staging，并做 long run 测试。
周六 reno 编译 py 文件，spencer 更新文件到测试区域 pek3b sh1b，同时发 changelog。前端更新到 pek2console/pek2appcenter/... 前后端都验证。
周日更新其他区域并验证，验证完成后前端更新 webconsole/webappcenter/... 到线上并验证。
前端 feature 相关更新，写到 log.qingcloud.com。可以用用户 ethan@yunify.com/zhu1241jie 登录编辑。


前端小版本的上线流程：


提交 MR，找人 review。
merge 到 master，晚上更新到 pek2 验证，确认后发布到线上。


关于上线和测试：


前后端研发 Team 的开发/测试内部过程（略）；
新产品/服务上线前，至少提前两星期周知 Marketing 同事线上开放的时间，以便提前开始准备宣传推广方案。（负责人：相应 PM）


注意事项：

2.1. PM 需要交付新产品/服务/功能的基础文案，内容包含但不限于产品介绍、功能特性、竞品分析、价格对比、使用场景等；

2.2. PM 需要给 Marketing 同事做基础文案的培训讲解；


上线前，完成线下 testing & staging 环境的测试。（负责人：相应前后端的研发 Owner）


注意事项：

3.1. 对于前端交互和后端实现较简单的新功能，至少要进行新功能测试；

3.2. 对于前端交互或后端实现复杂的新功能，还需对受影响的已有功能进行回归测试；

3.3. 对于全新的产品/服务，还需进行性能和高可用性等非功能性测试；

3.4. 对于产品/服务的后端，强烈建议进行对所有 API 的持续自动化测试；

3.5. PM 需要提前和前后端研发确认好上线时间，并周知 Marketing 同事；


对于前端交互复杂的新功能/产品/服务，需要先发布到线上 Pek2Console 预生产环境验证，验证通过后，才可正式对外上线开放。（负责人：相应研发 Owner & PM ）


注意事项：

4.1 验证内容包括功能在新区和老区都正常、有关联的产品/服务都正常等；

4.2 PM 需要确认计费价格、界面文字描述等正确；


上线开放后，需要进行线上生产环境验证。（负责人：相应研发 Owner & PM）
注意事项：


5.1 如果在第 3 步验证较全，本步骤可以相应减少验证，只涵盖重要部分；

5.2 验证内容包含新区/老区的功能、有关联的产品/服务都正常等；
   5.3 PM 需要确认计费价格、界面文字描述、用户指南、官网价格计算器等同步更新；
   5.4 上线验证时，PM 需要提前协调好前后端研发线上 Standby，准备处理上线过程中可能遇见的问题；


线上验证完后，如无问题，相关上线群里周知上线成功；如有问题，且是影响用户前端正常使用流程/影响后端系统稳定性的严重Bug，需要马上开始进行 hotfix 修复再上线；如果是不影响使用/小概率会出发的问题，可根据问题的复杂度及 Fix 的难度来决定何时修复。（负责人：相应研发 Owner & PM）


注意事项：

6.1 确认上线成功后， PM 需要周知 Marketing 同事并协助开始宣传推广事宜；

6.2 确认上线成功后， PM 需要撰写青云志并同步到公有云销售&客户中心群；

注意：ToB 企业用户的上线发布是一件非常严肃的事情，负责人一定要保证上线的产品/服务/功能的质量！


工单

关于值工单：


值工单的目的：


职责所在，帮助 service 团队回答技术相关问题；
了解我们系统；
了解我们的用户和使用方式；
第一时间得到 bug 反馈和需求提案，帮助我们改进系统。


新同事加入一段时间（通常是1-2个月）后，会编入值工单团队。每个研发的团队，每天有1名工程师轮值工单，成为该领域工单的接口人。如前端组15人，则15天为1个周期循环。
编入值工单团队的同学，会进入 L2 的一个 skype 群，有相关问题会直接找到该同学跟进。
工单的问题，需要仔细查看，分清楚是什么问题。如果确实是前端问题，先分析下是什么原因，如果发现解决不了，到前端群里求助。如果是其他团队问题，及时地在 L2 群里反馈。
新同学值工单当天，原则可以不做任何开发工作，除非工作确实很紧急。但相应的，一定要把当天所有工单都看一遍，包括问题和解决方法，以熟悉我们的工单回答方式和解决方式。如果有余力，可以看历史工单。


关于回工单：


多利用搜索，查看类似工单如何回复。
对用户要用尊敬的语气，回工单时我们是服务者。
涉及到我们自己的 bug，可以坦诚的说是 bug。但需要注意场合，比如是一个很严重的问题，我们先不要着急说，要统一口径，由 PR 来说。
回工单的速度，以前我们一直都是 3 分钟以内，后来变成了 5 分钟以内。但这个速度不要降下来，用户在等着我们回复。
问题一定要肯定、想清楚了再回复；如果问题本身是属于搞不清楚，需要用户提供内容的，就让用户来提供更多信息，帮助我们分析。
需要打电话的时候，就打电话，直接跟用户沟通。